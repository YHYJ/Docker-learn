# Author: YJ
# Email: yj1516268@outlook.com
# Created Time: 2019-04-29 14:42:53

# 系统 - odoo

# 数据库 - postgres

version: '3'
services:
  odoo:
    image: odoo
    container_name: odoo
    restart: unless-stopped     # no, unless-stopped, always, on-failure:<max-retries>
    privileged: false
    ports:
      - 8069:8069
      - 8071:8071
      - 8086:8086
    volumes:
      - odoo:/var/lib/odoo
      - $HOME/Documents/MyDockeroot/data/odoo:/mnt/extra-addons   # 插件
    environment:
      HOST: postgres            # services.name[postgres]
    links:
      - postgres:db             # services.name[postgres], link.alias = db
  postgres:
    image: postgres
    container_name: pg4odoo
    restart: unless-stopped     # no, unless-stopped, always, on-failure:<max-retries>
    privileged: false
    ports:
      - 5432:5432
    volumes:
      - pg4odoo:/var/lib/postgres/data
      - pg4odoo:/var/lib/postgresql/data
    environment:
      POSTGRES_DB: postgres     # 默认数据库名
      POSTGRES_USER: odoo
      POSTGRES_PASSWORD: odoo
volumes:
  odoo: {}
  pg4odoo: {}
